<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/a11y-dark.min.css" />
    <link rel="stylesheet" href="./assets/style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/languages/javascript.min.js"></script>

    <script
        src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.7.0/highlightjs-line-numbers.min.js"></script>

    <script src="./dist/json-form.js"></script>

    <title>JsonForm - Demo</title>
</head>

<body>
    <header role="banner" class="container">
        <div class="row p-4">
            <div class="col-2 d-flex justify-content-center align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" version="1.1">
                    <path style="opacity:0.2"
                        d="M 14.5,8 C 13.115,8 12,9.115 12,10.5 V 55.5 C 12,56.885 13.115,58 14.5,58 H 49.5 C 50.885,58 52,56.885 52,55.5 V 23 L 37,8 Z" />
                    <path style="fill:#1c59a5"
                        d="M 14.5,7 C 13.115,7 12,8.115 12,9.5 V 54.5 C 12,55.885 13.115,57 14.5,57 H 49.5 C 50.885,57 52,55.885 52,54.5 V 22 L 37,7 Z" />
                    <path style="opacity:0.2" d="M 52,23 37,8 V 20.5 C 37,21.885 38.115,23 39.5,23 Z" />
                    <path style="fill:#6295d3" d="M 52,22 37,7 V 19.5 C 37,20.885 38.115,22 39.5,22 Z" />
                    <path style="opacity:0.1;fill:#ffffff"
                        d="M 14.5 7 C 13.115 7 12 8.115 12 9.5 L 12 10.5 C 12 9.115 13.115 8 14.5 8 L 37 8 L 37 7 L 14.5 7 z" />
                    <path style="fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;opacity:0.2"
                        d="M 37,31 C 46,34 35,38 44,41 M 37,51 C 46,48 35,44 44,41 M 27,31 C 18,34 29,38 20,41 M 27,51 C 18,48 29,44 20,41" />
                    <path style="fill:none;stroke:#ffffff;stroke-width:2;stroke-linecap:round"
                        d="M 37,30 C 46,33 35,37 44,40 M 37,50 C 46,47 35,43 44,40 M 27,30 C 18,33 29,37 20,40 M 27,50 C 18,47 29,43 20,40" />
                </svg>
            </div>

            <div class="col-10">
                <h1>JSON Form Generator</h1>
                <h3>A lightweight JavaScript library for generating forms from JSON/Object.</h3>
            </div>

        </div>

        <hr>
        <a href="https://github.com/Rmanaf/json-form"><img width="149" height="149"
                src="https://github.blog/wp-content/uploads/2008/12/forkme_left_darkblue_121621.png?resize=149%2C149"
                class="github-link attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    </header>

    <main role="main" class="container">

        <h4>Installation</h4>

        <pre><code>$ npm install @rmanaf/json-form</code></pre>

        <p>Or from the repository (Latest Version)</p>

        <pre><code> &lt;head&gt;
    &lt;script src="https://rmanaf.github.io/json-form/dist/json-form.min.js"&gt;&lt;/script&gt;
 &lt;/head&gt;</code></pre>

    <br />
        <h4>Usage</h4>

        <pre><code class="js">new JsonForm(data: string | object, options?: object , target?: string);</code></pre>

        <h5>Data:</h5>
        <p>JSON string or object</p>

        <h5>Options <sub>optional</sub></h5>
        <p>The following parameters are supported:</p>

        <ul class="opt-list">
            <li>body: <span>HTMLElement</span> , <cite>default: document.body</cite></li>
            <li>model: <span>string</span> , <cite>default: " "</cite></li>
            <li>exclude: <span>string[ ]</span> , <cite>default : [ ]</cite></li>
            <li>labels: <span>object</span> , <cite>default : { }</cite></li>
            <li>sections: <span>object</span> , <cite>default : { }</cite></li>
            <li>showTypes: <span>boolean</span> , <cite>default : false</cite></li>
            <li>allRequired: <span>boolean</span> , <cite>default : false</cite></li>
            <li>optionals: <span>string[ ]</span> , <cite>default : [ ]</cite></li>
            <li>types: <span>object</span> , <cite>default : { }</cite></li>
            <li>attributes: <span>object</span> , <cite>default : { }</cite></li>
            <li>encodeURI: <span>boolean</span> , <cite>default : false</cite></li>
            <li>templates: <span>object</span> , <cite>default : { }</cite></li>
            <li>meta: <span>object</span> , <cite>default : { }</cite></li>
            <li>onchange: <span>object</span> , <cite>default : { }</cite></li>
            <li>events: <span>object</span> , <cite>default : { "*" : "keyup keypress blur change", "*-number" : "keyup
                    keypress blur change mouseup" }</cite></li>
        </ul>

        <h5>Target <sub>optional</sub></h5>
        <p>HTML element ID</p>

        <hr>

        <h5>Create Form:</h5>

        <pre>
            <code class="js"> var data = {
    a : {
        b : {
            c : "d"
        }
    },
    e : {
        f : 0
    }
 }

 var editor = new JsonForm(data);</code>
        </pre>

        <h5>Result:</h5>
        <form class="row">

            <div class="col-12 col-sm-6">
                <div class="model-editor" data-model-editor data-model="usage1"></div>
            </div>

            <div class="col-12 col-sm-6">
                <textarea id="u1placeholder" readonly class="form-control" rows="6"></textarea>
            </div>

        </form>

        <hr>

        <h5>Custom Labels:</h5>

        <pre>
        <code> var editor = new JsonForm(data , {
    labels : {
        'data.a.b.c' : "Custom Label 1",
        'data.e.f' : "Custom Label 2",
    }
 });</code>
    </pre>
        <h5>Result:</h5>

        <form class="row">

            <div class="col-12">
                <div class="model-editor" data-model-editor data-model="usage2"></div>
            </div>

        </form>


        <hr>

        <h5>Exclude Fields:</h5>

        <pre>

        <code> var editor = new JsonForm(data , {
    exclude : [
        'data.e' // or 'data.e.f'
    ]
 });</code>
    </pre>

        <h5>Result:</h5>

        <form class="row">

            <div class="col-12">
                <div class="model-editor" data-model-editor data-model="usage3"></div>
            </div>

        </form>

        <hr>
        <h5>Field Attributes:</h5>

        <pre>

        <code> var editor = new JsonForm(data , {
    attributes : [
        'data.e.f' : {
            "min" : 0,
            "max" : 10,
            "class" : "form-control is-invalid"
        }
    ]
 });</code>
    </pre>

        <h5>Result:</h5>

        <form class="row">

            <div class="col-12">
                <div class="model-editor" data-model-editor data-model="usage4"></div>
            </div>

        </form>


        <hr>
        <h5>Custom Template:</h5>

        <pre>

        <code class="js"> var editor = new JsonForm(data , {
    templates : {
        'data.e.f' : 'myTemplate'
    }
 });</code>
    </pre>
        <h6>HTML Code:</h6>
        <pre>
        <code class="html">&lt;template id="myTemplate"&gt;{{label}}&lt;input type="{{inputType}}" id="{{id}}"&gt;&lt;/template&gt;</code>
    </pre>
        The following parameters are supported:
        <ul>
            <li><b>id</b></li> 
            <li><b>inputType</b></li>
            <li><b>type</b></li>
            <li><b>label</b></li>
            <li><b>value</b></li>
        </ul>
        
        <div class="alert alert-info" role="alert">You can define more parameters in meta section.</div>
        
        <pre>

        <code class="js"> var editor = new JsonForm(data , {
    meta : {
        '*' : {
            "info" : "custom value",
            "fn" : (args) => { return args.value.toUpperCase(); }
        }
    },
    templates : {
        '*' : 'myTemplate'
    }
 });</code>
    </pre>
        <h6>HTML Code:</h6>
        <pre>
        <code class="html">&lt;template id="myTemplate"&gt;{{label}}&lt;input type="{{inputType}}" id="{{id}}"&gt;{{info}}: {{fn}}&lt;/template&gt;</code>
    </pre>

        <hr>

        <h5>Update Form:</h5>
        You can update forms by using the <b>update()</b> method.
        <pre><code class="js">var num = 0;
function addNewEllement() {

    num++;

    data.model["product_" + num] = {
        name: "Name",
        available: true,
        count: 10
    }

    editor.update();

}
        </code></pre>
        <form class="row">

            <div class="col-12 col-sm-6">
                <div class="model-editor" data-model-editor data-model="usage5"></div>
                <input class="btn btn-primary" type="button" value="Add Item" onclick="addNewEllement()">
            </div>


            <div class="col-12 col-sm-6">
                <textarea id="u5placeholder" readonly class="form-control" rows="6"></textarea>
            </div>

        </form>

        <hr>
        <h5>Form Validation</h5>
        A simple login form:
        <pre><code>var data = {
    "login" : {
        "name" : "",
        "pass" : ""
    }
}
const editor = new JsonForm(data , {
    "model" : "login"
    "labels" : {
        "data.login.name" : "Username:",
        "data.login.pass" : "Password:"
    },
    "attributes" : {
        "data.login.name" : {
            "type" : "text",
            "minlength" : 4
        },
        "data.login.pass" : {
            "type" : "password",
            "minlength" : 8
        }
    },
    "onchange" : {
        "data.login.name" : function(target, value, path, type){ 

            // Username validator

            const regex = /^[A-Za-zñÑáéíóúÁÉÍÓÚ][a-zA-ZñÑáéíóúÁÉÍÓÚ0-9_]+$/;
            const valid = value.match(regex);

            if(valid == null){
                target.classList.add("is-invalid");
            }else{
                target.classList.remove("is-invalid");
            }
       },
       "data.login.pass" : function(target, value, path, type){ 

           // Password validator

            const regex = /(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[_$@$!%*?&]).+$/;
            const valid = value.match(regex);

            if(valid == null){
                target.classList.add("is-invalid");
            }else{
                target.classList.remove("is-invalid");
            }
        }
   } 
});</code></pre>
<form class="row">

    <div class="col-12 col-sm-6">
        <div class="model-editor" data-model-editor data-model="login" ></div>
    </div>

    <div class="col-12 col-sm-6">
        <textarea id="u6placeholder" readonly class="form-control" rows="6"></textarea>
    </div>

</form>

        <!--  bootstrap-templates -->

        <template id="inputTemplate">
            <div class="from-group">
                <label for="{{id}}">{{label}}</label>
                <input id="{{id}}" class="form-control">
                <small class="form-text text-muted">{{description}}</small>
            </div>
        </template>

        <template id="checkboxTemplate">
            <div class="form-check">
                <input class="form-check-input" id="{{id}}">
                <label class="form-check-label" for="{{id}}">
                    {{label}}
                </label>
            </div>
        </template>


    </main>

    <footer role="contentinfo" class="container mt-5 p-4 bg-light">
       <p> by <a href="https://rmanaf.com">@Rmanaf</a> </p>
    </footer>

    <script src="./assets/script.js"></script>

</body>

</html>