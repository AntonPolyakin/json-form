/** 
 * JsonForm | A lightweight JavaScript library for generating dynamic forms from JSON/Object. v1.0.2 (https://github.com/Rmanaf/json-form) 
 * Licensed under MIT (https://github.com/Rmanaf/json-form/blob/master/LICENSE) 
 */var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(d){var f=0;return function(){return f<d.length?{done:!1,value:d[f++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,f,e){d!=Array.prototype&&d!=Object.prototype&&(d[f]=e.value)};
$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var d=0;return function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+d++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.asyncIterator;d||(d=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};
$jscomp.iteratorFromArray=function(d,f){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var e=0,b={next:function(){if(e<d.length){var a=e++;return{value:f(a,d[a]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill=function(d,f,e,b){if(f){e=$jscomp.global;d=d.split(".");for(b=0;b<d.length-1;b++){var a=d[b];a in e||(e[a]={});e=e[a]}d=d[d.length-1];b=e[d];f=f(b);f!=b&&null!=f&&$jscomp.defineProperty(e,d,{configurable:!0,writable:!0,value:f})}};$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");
$jscomp.findInternal=function(d,f,e){d instanceof String&&(d=String(d));for(var b=d.length,a=0;a<b;a++){var c=d[a];if(f.call(e,c,a,d))return{i:a,v:c}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,e){return $jscomp.findInternal(this,d,e).v}},"es6","es3");
var __spreadArray=this&&this.__spreadArray||function(d,f,e){if(e||2===arguments.length)for(var b=0,a=f.length,c;b<a;b++)!c&&b in f||(c||(c=Array.prototype.slice.call(f,0,b)),c[b]=f[b]);return d.concat(c||Array.prototype.slice.call(f))},JsonForm;
(function(d){d.NS_EVENTS="json-form";d.STAGE_DELAY_INITIAL=20;d.STAGE_DELAY_INTERMEDIATE=40;d.STAGE_DELAY_FINAL=60;var f;(function(b){b[b.Errors=0]="Errors";b[b.Events=1]="Events";b[b.All=2]="All";b[b.None=3]="None"})(f=d.LogLevel||(d.LogLevel={}));var e=function(){return function(b){this.form=b}}();d.Extension=e;d.create=function(b,a,c){return new d.Engine(b,a,c)};e=function(){function b(){}b.uniqueID=function(a){void 0===a&&(a="_");var c=Math.random().toString(36);return a+c.substring(2,9)};b.merge=
function(a,c){var g={},b;for(b in a)g[b]=a[b];for(b in c)g[b]=c[b];return g};return b}();d.Utilities=e;e=function(){function b(a,c,g){void 0===c&&(c={});void 0===g&&(g=null);var b=this;this._nodes=[];this._sections=[];this._extensions=[];var p={body:document.body,model:"",exclude:[],labels:{},sections:{},types:{},attributes:{},templates:{},meta:{},secure:!1,events:{"*":"keyup keypress focus blur change","*-number":"keyup keypress focus blur change mouseup"},pattern:/{{\s*([^{}]+)\s*}}/g};if("string"===
typeof a){var h=d.Utilities.uniqueID();window[h]=JSON.parse(a);a=window[h]}null!==g&&("string"===typeof g?this._target=document.getElementById(g):g instanceof HTMLElement?this._target=g:this._mayLog(f.Errors)&&this._log("Error","Type of target is wrong!"));this._raw=this._d=a;this._o=this._extend(p,c);"string"===typeof this._o.body&&(this._o.body=document.getElementById(this._o.body));setTimeout(function(){b.update();setTimeout(function(){b._dispatchEvent("init")})},d.STAGE_DELAY_INITIAL)}b.prototype._getObjectName=
function(a){for(var c in window)if(!(-1<b.WIN_PROPS.indexOf(c))&&window[c]==a)return c;return"undefined"};b.prototype._extend=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];for(c=1;c<a.length;c++)for(var g in a[c])a[c].hasOwnProperty(g)&&(a[0][g]=a[c][g]);return a[0]};b.prototype._updateTarget=function(){if("undefined"!==typeof this._target){var a=this.filterTargetValue(JSON.stringify(this._d));this._target.value=a;this._dispatchEvent("update.target",{target:this._target,data:a})}};
b.prototype.updateTarget=function(){this._updateTarget()};b.prototype._bindEvents=function(a,c,g,b){c="string"===typeof c?c.split(" "):c;for(var d=0,m=c.length;d<m;d++)a&&a.addEventListener(c[d],g,b)};b.prototype._createFromTemplate=function(a){var c,g,b=a.id,p=a.path,h=a.value,f=a.inputType,n=a.type,e=a.label;a=this._o.templates[a.template];a=((null===(g=this._o.body)||void 0===g?void 0:g.ownerDocument)||document).getElementById(a).cloneNode(!0);var k={id:b,type:n,label:e,path:p,inputType:f,value:h,
form:this};(g=this._pathIncludes(p,Object.keys(this._o.meta),f))&&(k=d.Utilities.merge(k,this._o.meta[g.match]));var q=d.Utilities.merge(k,{parsePath:this._parsePath});a.innerHTML=a.innerHTML.replace(this._o.pattern,function(a,c){c=c.split("|");a=k[c[0]]||"";"function"===typeof a&&(c=c.length?c.slice(1,c.length):[],a=a(d.Utilities.merge(q,{templateData:c})));return a}.bind(this));g=document.importNode(a.content,!0);(c=this._nodes).push.apply(c,g.childNodes);this._appendInput(g,p)};b.prototype._createInput=
function(a,c,g,b){var m=this,h=d.Utilities.uniqueID(),e=this.filterInputName(g),n=this.getLabel(g),l=this._pathIncludes(g,Object.keys(this._o.templates),c);if(l){this._createFromTemplate({id:h,path:g,value:a,inputType:c,type:b,label:n,template:l.match});var k=document.getElementById(h);if("undefined"===typeof k){this._mayLog(f.Errors)&&this._log("Error","Missing element for <".concat(l.match,">"));return}}else k=document.createElement("input"),k.setAttribute("id",h);if(k){k.setAttribute("name",e);
k instanceof HTMLInputElement?k.setAttribute("type",c):this._setElementData(k,{jfInputType:c});this._setElementData(k,{jfPath:g,jfType:b});k.value=a;"checkbox"===c&&"boolean"===b&&(k.checked=a);var q=this._pathIncludes(g,Object.keys(this._o.attributes),c);q&&Object.keys(this._o.attributes[q.match]).forEach(function(a){k.setAttribute(a,m._o.attributes[q.match][a])})}l||(a=document.createElement("label"),a.setAttribute("for",h),"checkbox"===c?(h=document.createElement("span"),h.innerHTML=n,a.appendChild(k),
a.appendChild(h)):(a.innerHTML=n,a.appendChild(k)),this._nodes.push(this._appendInput(a,g)));n=this._o.events;(c=this._pathIncludes(g,Object.keys(this._o.events),c))&&(n=this._o.events[c.match]);this._bindEvents(k,n,this._eventHandler.bind(this))};b.prototype._appendInput=function(a,c,b){var g=this;void 0===b&&(b="input");var d=c.split(".").slice(0,-1).join("."),h=Object.keys(this._o.sections).filter(function(a){return!1!==g._pathIncludes(c,g._o.sections[a].children,b)}),f=!1!==this._testArray(d);
if(h.length){h=h[0];var e=this._o.sections[h];this._sections.hasOwnProperty(d)&&f&&(h=d);if(this._sections.hasOwnProperty(h))e=this._sections[h];else{var l=this._createElementFromHTML(e.template||"section");!0!==e.repeat?(l.setAttribute("data-section",h),this._sections[h]=l):!0===e.merge&&f&&(l.setAttribute("data-section",d),this._sections[d]=l);this._o.body.appendChild(l);e=l;this._nodes.push(l)}e.appendChild(a);return a}this._o.body.appendChild(a);return a};b.prototype._pathIncludes=function(a,
c,g,d){void 0===g&&(g="input");void 0===d&&(d=!0);if(0===c.length)return!1;if(0<=c.indexOf(a))return{path:a,match:a,mode:"exact"};if(c.some(function(a){return/\/\S+\//.test(a)}))for(var m in c)if(/\/\S+\//.test(c[m])&&b.stringToRegex(c[m]).test(a))return{path:a,match:c[m],mode:"regex"};if(c.some(function(a){return a==="*-".concat(g)}))return{path:a,match:"*-".concat(g),mode:"type"};if(c.some(function(a){return"*"===a||"*.*"===a}))return{path:a,match:"*",mode:"wildcard"};if(d)for(d=a;d.length;){m=
d.split(".").slice(0,-1).join(".");if(0<=c.indexOf(m))return{path:a,match:m,mode:"ancestor"};d=m}return!1};b.stringToRegex=function(a,c){void 0===c&&(c=null);return(c=a.match(/^([\/~@;%#'])(.*?)\1([gimsuy]*)$/))?(a=c[2],c=c[3].split("").filter(function(a,c,b){return b.indexOf(a)===c}).join(""),new RegExp(a,c)):new RegExp(a)};b.prototype._eventHandler=function(a){var c=a.target,b=c.getAttribute("type"),d=this._getElementData(c,"jfType","jfPath"),e=d.jfType;d=d.jfPath;var h=c.value;"checkbox"===b&&
(h=c.checked);"number"===e&&""===h&&(h=0);try{this._updateData(d,h,e)}catch(r){this._mayLog(f.Errors)&&this._log("Error",'Unable to set value "'.concat(h,'" for "').concat(d,'".\n').concat(r.message));return}this._updateTarget();this._dispatchEvent("change",{path:d,type:e,event:a})};b.prototype._getElementData=function(a){for(var c=this,b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];var e={};a=a?this._validateElement(a):this._o.body;b.forEach(function(b){try{e[b]=!0===c._o.secure&&a.jf&&void 0!==
a.jf[b]?a.jf[b]:void 0!==a.dataset[b]?a.dataset[b]:!1}catch(r){c._mayLog(f.Errors)&&console.error(r),e[b]=!1}});return 1===b.length?e[b[0]]:e};b.prototype.getElementData=function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];return this._getElementData.apply(this,__spreadArray([a],c,!1))};b.prototype._setElementData=function(a,c){a||(a=this._o.body);for(var b in c)c.hasOwnProperty(b)&&(!0===this._o.secure?(a.jf=a.jf||{},a.jf[b]=c[b]):c[b]?a.dataset[b]="string"===typeof c[b]?c[b]:
JSON.stringify(c[b]):delete a.dataset[b])};b.prototype.setElementData=function(a,c){this._setElementData(a,c)};b.prototype._parsePath=function(a){var c=this;a=a.split(".");var b={};"window"===a[0]&&a.shift();var d=a.pop(),e=this._testArray(d);e&&(a.push(e.value),d=e.matches[1]);b=a.reduce(function(a,b){var d=c._testArray(b);return d?a[d.value][d.matches[1]]:a[b]},window);return{object:b,parameter:d,get:function(){return"undefined"===typeof d?b:b[d]},set:function(a){"undefined"!==typeof d&&(b[d]=a)}}};
b.prototype._testArray=function(a){var c=/\[([^)]+)\]/;if(c.test(a)){var b=c.exec(a);a=a.replace(c,"");return{matches:b,value:a}}return!1};b.prototype._updateData=function(a,c,b){c={path:a,value:this._castToType(b,c),type:b};a=this._parsePath(a);this._dispatchEvent("updating.data");a.object[a.parameter]=this.filterData(c).value;this._dispatchEvent("updated.data")};b.prototype._castToType=function(a,c){switch(a){case "number":return Number(c);case "boolean":return!!c;default:return c}};b.prototype._checkValues=
function(a,c){var b=this;a=this._parsePath(c).get();var d=typeof a,e="text";switch(d){case "object":Array.isArray(a)?a.forEach(function(a,d,g){d="".concat(c,"[").concat(d,"]");b._checkValues(a,d)}):Object.keys(a).forEach(function(a){var d="".concat(c,".").concat(a);b._checkValues(a,d)});return;case "boolean":e="checkbox";break;case "number":e="number"}var f=this._pathIncludes(c,Object.keys(this._o.types),e);f&&(e=this._o.types[f.match]);this._pathIncludes(c,this._o.exclude,e)||(this._createInput(a,
e,c,d),this._dispatchEvent("append",{path:c}))};b.prototype._clearForm=function(a){void 0===a&&(a=!1);this._nodes.forEach(function(a){null!==a.parentNode&&a.parentNode.removeChild(a)});this._nodes=[];this._sections=[];a&&this._dispatchEvent("clear")};b.prototype._mayLog=function(a){return b.LOG_LEVEL!==f.None&&(b.LOG_LEVEL===a||b.LOG_LEVEL==f.All)};b.prototype._log=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];c=(new Date).toISOString().slice(11,-1);console.log.apply(console,
__spreadArray([c],a,!1))};b.prototype._dispatchEvent=function(a,c){void 0===c&&(c=null);a="".concat(d.NS_EVENTS,".").concat(a);this._mayLog(f.Events)&&this._log("Event",a,JSON.stringify(c)||"");c?this._o.body.dispatchEvent(new CustomEvent(a,{detail:c})):this._o.body.dispatchEvent(new Event(a))};b.prototype.dispatchEvent=function(a,c){void 0===c&&(c=null);this._dispatchEvent(a,c)};b.prototype.destroy=function(){this.reset();this._clearForm();this._dispatchEvent("destroy")};b.prototype.set=function(a,
c){if(this._o.hasOwnProperty(a)){var b=typeof this._o[a],d=typeof c;typeof c!==typeof this._o[a]?this._mayLog(f.Errors)&&this._log("Error",'Type mismatch for "'.concat(a,'" : "').concat(b,'". Current value is "').concat(d,'".')):this._o[a]=c}else this._mayLog(f.Errors)&&this._log("Error",'"'.concat(a,'" is not defined.'))};b.prototype.clear=function(){this._clearForm(!0)};b.prototype.update=function(){var a=this._o.model,c=this._getObjectName(this._d);c=this.hasModel()?"".concat(c,".").concat(a):
c;this._dispatchEvent("updating");this._clearForm();this._checkValues(a,c);this._updateTarget();this._dispatchEvent("updated")};b.prototype.hasModel=function(){return!!this._o.model.length};b.prototype.reset=function(a){void 0===a&&(a="");var c=this._raw,b=this._o.model;a.length&&(b=a);b.length?this._o.data[a]=c[a]:this._o.data=c;return this.data()};b.prototype.resetAll=function(){return this.reset()};b.prototype._createElementFromHTML=function(a){if(/<\/?[a-z][\s\S]*>/i.test(a)){var c=document.implementation.createHTMLDocument();
c.body.innerHTML=a;return c.body.firstChild}return document.createElement(a)};b.prototype._validateElement=function(a){if("string"===typeof a)if(a=this.find(a))a=a[0];else return;return a};b.prototype.addEventListener=function(a,c,b){this._bindEvents(this._o.body,a,c,b)};b.prototype.on=function(a,c,b){this._bindEvents(this._o.body,a,c,b);return this};b.prototype.find=function(){for(var a=this,c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];b=__spreadArray([],this._o.body.querySelectorAll("input"),
!0);c.length&&(b=b.filter(function(b){return a._pathIncludes(a._getElementData(b,"jfPath"),c)}));if(b.length)return b};b.prototype.getPath=function(a){return this._getElementData(this._validateElement(a),"jfPath")};b.prototype.getType=function(a){return this._getElementData(this._validateElement(a),"jfType")};b.prototype.getLabel=function(a){var b=this._pathIncludes(a,Object.keys(this._o.labels)),d=this._parsePath(a),e;b&&(e=this._o.labels[b.match]);"function"===typeof e?e=e(d.parameter,a):"undefined"===
typeof e&&(e=d.parameter);return e};b.prototype.pathIncludes=function(a,b,d,e){void 0===d&&(d="input");void 0===e&&(e=!0);return this._pathIncludes(a,b,d,e)};b.prototype.use=function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];if(this.get(a))return this._mayLog(f.Errors)&&this._log("Extension is already added to the form!"),this;d=new a(this);d.init.apply(d,c);this._extensions.push({_constructor:a,name:b._getExtName(a),instance:d});return this};b.prototype.get=function(a){var c=
b._getExtName(a),d;this._extensions.forEach(function(a){c===a.name&&(d=a)});return null===d||void 0===d?void 0:d.instance};b._getExtName=function(a){return a.toString().replace(/function\s+(\w+)\(\)\s*\{[\S\s]*\}\s*/,"$1")};b.prototype.filterData=function(a){return a};b.prototype.filterTargetValue=function(a){return a};b.prototype.filterInputName=function(a){return a};Object.defineProperty(b.prototype,"data",{get:function(){return this._d},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"json",{get:function(){return JSON.stringify(this._d)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"value",{get:function(){var a=this._o.model,b=this._d;return a.length?b[a]:b},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"model",{get:function(){return this._o.model},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"raw",{get:function(){return this._raw},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"ownerDocument",{get:function(){return this._o.body.ownerDocument},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"body",{get:function(){return this._o.body},enumerable:!1,configurable:!0});b.WIN_PROPS=Object.getOwnPropertyNames(window);b.LOG_LEVEL=f.None;return b}();d.Engine=e})(JsonForm||(JsonForm={}));