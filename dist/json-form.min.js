/** 
 * JsonForm | A lightweight JavaScript library for generating dynamic forms from JSON/Object. v1.0.0 (https://github.com/Rmanaf/json-form) 
 * Licensed under MIT (https://github.com/Rmanaf/json-form/blob/master/LICENSE) 
 */var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var f=0;return function(){return f<c.length?{done:!1,value:c[f++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,f,e){c!=Array.prototype&&c!=Object.prototype&&(c[f]=e.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.iteratorFromArray=function(c,f){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var e=0,b={next:function(){if(e<c.length){var a=e++;return{value:f(a,c[a]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill=function(c,f,e,b){if(f){e=$jscomp.global;c=c.split(".");for(b=0;b<c.length-1;b++){var a=c[b];a in e||(e[a]={});e=e[a]}c=c[c.length-1];b=e[c];f=f(b);f!=b&&null!=f&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:f})}};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.findInternal=function(c,f,e){c instanceof String&&(c=String(c));for(var b=c.length,a=0;a<b;a++){var d=c[a];if(f.call(e,d,a,c))return{i:a,v:d}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,e){return $jscomp.findInternal(this,c,e).v}},"es6","es3");
var __spreadArray=this&&this.__spreadArray||function(c,f,e){if(e||2===arguments.length)for(var b=0,a=f.length,d;b<a;b++)!d&&b in f||(d||(d=Array.prototype.slice.call(f,0,b)),d[b]=f[b]);return c.concat(d||Array.prototype.slice.call(f))},JsonForm;
(function(c){c.NS_EVENTS="json-form";c.STAGE_DELAY_INITIAL=20;c.STAGE_DELAY_INTERMEDIATE=40;c.STAGE_DELAY_FINAL=60;var f;(function(b){b[b.Errors=0]="Errors";b[b.Events=1]="Events";b[b.All=2]="All";b[b.None=3]="None"})(f=c.LogLevel||(c.LogLevel={}));var e=function(){return function(b){this.form=b}}();c.Extension=e;c.create=function(b,a,d){return new c.Engine(b,a,d)};e=function(){function b(){}b.uniqueID=function(a){void 0===a&&(a="_");var d=Math.random().toString(36);return a+d.substring(2,9)};b.merge=
function(a,d){var g={},b;for(b in a)g[b]=a[b];for(b in d)g[b]=d[b];return g};return b}();c.Utilities=e;e=function(){function b(a,d,g){void 0===d&&(d={});void 0===g&&(g=null);var b=this;this._nodes=[];this._sections=[];this._extensions=[];var q={body:document.body,model:"",exclude:[],labels:{},sections:{},types:{},attributes:{},templates:{},meta:{},secure:!1,events:{"*":"keyup keypress focus blur change","*-number":"keyup keypress focus blur change mouseup"}};if("string"===typeof a){var h=c.Utilities.uniqueID();
window[h]=JSON.parse(a);a=window[h]}null!==g&&("string"===typeof g?this._target=document.getElementById(g):g instanceof HTMLElement?this._target=g:this._mayLog(f.Errors)&&this._log("Error","Type of target is wrong!"));this._raw=this._d=a;this._o=this._extend(q,d);"string"===typeof this._o.body&&(this._o.body=document.getElementById(this._o.body));setTimeout(function(){b.update();setTimeout(function(){b._dispatchEvent("init")})},c.STAGE_DELAY_INITIAL)}b.prototype._getObjectName=function(a){for(var d in window)if(!(-1<
b.WIN_PROPS.indexOf(d))&&window[d]==a)return d;return"undefined"};b.prototype._extend=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];for(d=1;d<a.length;d++)for(var g in a[d])a[d].hasOwnProperty(g)&&(a[0][g]=a[d][g]);return a[0]};b.prototype._updateTarget=function(){if("undefined"!==typeof this._target){var a=this.filterTargetValue(JSON.stringify(this._d));this._target.value=a;this._dispatchEvent("update.target",{target:this._target,data:a})}};b.prototype.updateTarget=function(){this._updateTarget()};
b.prototype._bindEvents=function(a,d,g,b){d="string"===typeof d?d.split(" "):d;for(var c=0,l=d.length;c<l;c++)a.addEventListener(d[c],g,b)};b.prototype._createFromTemplate=function(a,d,b,l,q,h,f){var g,e=this,k=this._o.body.ownerDocument.getElementById(this._o.templates[f]).cloneNode(!0),n={id:a,type:q,label:h,path:d,inputType:l,value:b,form:this};(a=this._pathIncludes(d,Object.keys(this._o.meta),l))&&(n=c.Utilities.merge(n,this._o.meta[a.match]));Object.keys(n).forEach(function(a){var d=c.Utilities.merge(n,
{parsePath:e._parsePath});k.innerHTML=k.innerHTML.replace(/{{[^{}]+}}/g,function(a){var b=a.replace(/[{}]+/g,"").split("|");a=n[b[0]]||"";"function"===typeof a&&(b=b.length?b.slice(1,b.length):[],a=a(c.Utilities.merge(d,{userData:b})));return a}.bind(e))});a=document.importNode(k.content,!0);(g=this._nodes).push.apply(g,a.childNodes);this._appendInput(a,d)};b.prototype._createInput=function(a,d,b,l){var g=this,h=c.Utilities.uniqueID(),e=this.filterInputName(b),p=this.getLabel(b),m=this._pathIncludes(b,
Object.keys(this._o.templates),d);if(m){this._createFromTemplate(h,b,a,d,l,p,m.match);var k=document.getElementById(h);if("undefined"===typeof k){this._mayLog(f.Errors)&&this._log("Error","Missing element for <".concat(m.match,">"));return}}else k=document.createElement("input"),k.setAttribute("id",h);k.setAttribute("name",e);k instanceof HTMLInputElement?k.setAttribute("type",d):this._setElementData(k,{jfInputType:d});this._setElementData(k,{jfPath:b,jfType:l});k.value=a;"checkbox"===d&&"boolean"===
l&&(k.checked=a);var r=this._pathIncludes(b,Object.keys(this._o.attributes),d);r&&Object.keys(this._o.attributes[r.match]).forEach(function(a){k.setAttribute(a,g._o.attributes[r.match][a])});m||(a=document.createElement("label"),a.setAttribute("for",h),"checkbox"===d?(h=document.createElement("span"),h.innerHTML=p,a.appendChild(k),a.appendChild(h)):(a.innerHTML=p,a.appendChild(k)),this._nodes.push(this._appendInput(a,b)));p=this._o.events;(d=this._pathIncludes(b,Object.keys(this._o.events),d))&&(p=
this._o.events[d.match]);this._bindEvents(k,p,this._eventHandler.bind(this))};b.prototype._appendInput=function(a,d,b){var g=this;void 0===b&&(b="input");var c=d.split(".").slice(0,-1).join("."),h=Object.keys(this._o.sections).filter(function(a){return!1!==g._pathIncludes(d,g._o.sections[a].children,b)}),f=!1!==this._testArray(c);if(h.length){h=h[0];var e=this._o.sections[h];this._sections.hasOwnProperty(c)&&f&&(h=c);if(this._sections.hasOwnProperty(h))e=this._sections[h];else{var m=this._createElementFromHTML(e.template||
"section");!0!==e.repeat?(m.setAttribute("data-section",h),this._sections[h]=m):!0===e.merge&&f&&(m.setAttribute("data-section",c),this._sections[c]=m);this._o.body.appendChild(m);e=m;this._nodes.push(m)}e.appendChild(a);return a}this._o.body.appendChild(a);return a};b.prototype._pathIncludes=function(a,d,g,c){void 0===g&&(g="input");void 0===c&&(c=!0);if(0===d.length)return!1;if(0<=d.indexOf(a))return{path:a,match:a,mode:"exact"};if(d.some(function(a){return/\/\S+\//.test(a)}))for(var l in d)if(/\/\S+\//.test(d[l])&&
b.stringToRegex(d[l]).test(a))return{path:a,match:d[l],mode:"regex"};if(d.some(function(a){return a==="*-".concat(g)}))return{path:a,match:"*-".concat(g),mode:"type"};if(d.some(function(a){return"*"===a||"*.*"===a}))return{path:a,match:"*",mode:"wildcard"};if(c)for(c=a;c.length;){l=c.split(".").slice(0,-1).join(".");if(0<=d.indexOf(l))return{path:a,match:l,mode:"ancestor"};c=l}return!1};b.stringToRegex=function(a,d){void 0===d&&(d=null);return(d=a.match(/^([\/~@;%#'])(.*?)\1([gimsuy]*)$/))?(a=d[2],
d=d[3].split("").filter(function(a,d,b){return b.indexOf(a)===d}).join(""),new RegExp(a,d)):new RegExp(a)};b.prototype._eventHandler=function(a){var d=a.target;a=a.type;var b=d.getAttribute("type"),c=this._getElementData(d,"jfType","jfPath"),e=c.jfType;c=c.jfPath;var h=d.value;"checkbox"===b&&(h=d.checked);"number"===e&&""===h&&(h=0);try{this._updateData(c,h,e)}catch(n){this._mayLog(f.Errors)&&this._log("Error",'Unable to set value "'.concat(h,'" for "').concat(c,'".\n').concat(n.message));return}this._updateTarget();
this._dispatchEvent("change",{path:c,type:e,event:a})};b.prototype._getElementData=function(a){for(var d=this,b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var e={};a=a?this._validateElement(a):this._o.body;b.forEach(function(b){try{e[b]=!0===d._o.secure&&a.jf&&void 0!==a.jf[b]?a.jf[b]:void 0!==a.dataset[b]?a.dataset[b]:!1}catch(n){d._mayLog(f.Errors)&&console.error(n),e[b]=!1}});return 1===b.length?e[b[0]]:e};b.prototype.getElementData=function(a){for(var d=[],b=1;b<arguments.length;b++)d[b-
1]=arguments[b];return this._getElementData.apply(this,__spreadArray([a],d,!1))};b.prototype._setElementData=function(a,d){a||(a=this._o.body);for(var b in d)d.hasOwnProperty(b)&&(!0===this._o.secure?(a.jf=a.jf||{},a.jf[b]=d[b]):d[b]?a.dataset[b]="string"===typeof d[b]?d[b]:JSON.stringify(d[b]):delete a.dataset[b])};b.prototype.setElementData=function(a,d){this._setElementData(a,d)};b.prototype._parsePath=function(a){var d=this;a=a.split(".");var b={};"window"===a[0]&&a.shift();var c=a.pop(),e=this._testArray(c);
e&&(a.push(e.value),c=e.matches[1]);b=a.reduce(function(a,b){var c=d._testArray(b);return c?a[c.value][c.matches[1]]:a[b]},window);return{object:b,parameter:c,get:function(){return"undefined"===typeof c?b:b[c]},set:function(a){"undefined"!==typeof c&&(b[c]=a)}}};b.prototype._testArray=function(a){var d=/\[([^)]+)\]/;if(d.test(a)){var b=d.exec(a);a=a.replace(d,"");return{matches:b,value:a}}return!1};b.prototype._updateData=function(a,d,b){d={path:a,value:this._castToType(b,d),type:b};a=this._parsePath(a);
this._dispatchEvent("updating.data");a.object[a.parameter]=this.filterData(d).value;this._dispatchEvent("updated.data")};b.prototype._castToType=function(a,b){switch(a){case "number":return Number(b);case "boolean":return!!b;default:return b}};b.prototype._checkValues=function(a,b){var d=this;a=this._parsePath(b).get();var c=typeof a,e="text";switch(c){case "object":Array.isArray(a)?a.forEach(function(a,c,g){c="".concat(b,"[").concat(c,"]");d._checkValues(a,c)}):Object.keys(a).forEach(function(a){var c=
"".concat(b,".").concat(a);d._checkValues(a,c)});return;case "boolean":e="checkbox";break;case "number":e="number"}var f=this._pathIncludes(b,Object.keys(this._o.types),e);f&&(e=this._o.types[f.match]);this._pathIncludes(b,this._o.exclude,e)||(this._createInput(a,e,b,c),this._dispatchEvent("append",{path:b}))};b.prototype._clearForm=function(a){void 0===a&&(a=!1);this._nodes.forEach(function(a){null!==a.parentNode&&a.parentNode.removeChild(a)});this._nodes=[];this._sections=[];a&&this._dispatchEvent("clear")};
b.prototype._mayLog=function(a){return b.LOG_LEVEL!==f.None&&(b.LOG_LEVEL===a||b.LOG_LEVEL==f.All)};b.prototype._log=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=(new Date).toISOString().slice(11,-1);console.log.apply(console,__spreadArray([b],a,!1))};b.prototype._dispatchEvent=function(a,b){void 0===b&&(b=null);a="".concat(c.NS_EVENTS,".").concat(a);this._mayLog(f.Events)&&this._log("Event",a,JSON.stringify(b)||"");b?this._o.body.dispatchEvent(new CustomEvent(a,{detail:b})):
this._o.body.dispatchEvent(new Event(a))};b.prototype.dispatchEvent=function(a,b){void 0===b&&(b=null);this._dispatchEvent(a,b)};b.prototype.destroy=function(){this.reset();this._clearForm();this._dispatchEvent("destroy")};b.prototype.set=function(a,b){if(this._o.hasOwnProperty(a)){var d=typeof this._o[a],c=typeof b;typeof b!==typeof this._o[a]?this._mayLog(f.Errors)&&this._log("Error",'Type mismatch for "'.concat(a,'" : "').concat(d,'". Current value is "').concat(c,'".')):this._o[a]=b}else this._mayLog(f.Errors)&&
this._log("Error",'"'.concat(a,'" is not defined.'))};b.prototype.clear=function(){this._clearForm(!0)};b.prototype.update=function(){var a=this._o.model,b=this._getObjectName(this._d);b=this.hasModel()?"".concat(b,".").concat(a):b;this._dispatchEvent("updating");this._clearForm();this._checkValues(a,b);this._updateTarget();this._dispatchEvent("updated")};b.prototype.hasModel=function(){return!!this._o.model.length};b.prototype.reset=function(a){void 0===a&&(a="");var b=this._raw,c=this._o.model;
a.length&&(c=a);c.length?this._o.data[a]=b[a]:this._o.data=b;return this.data()};b.prototype.resetAll=function(){return this.reset()};b.prototype._createElementFromHTML=function(a){if(/<\/?[a-z][\s\S]*>/i.test(a)){var b=document.implementation.createHTMLDocument();b.body.innerHTML=a;return b.body.firstChild}return document.createElement(a)};b.prototype._validateElement=function(a){if("string"===typeof a)if(a=this.find(a))a=a[0];else return;return a};b.prototype.addEventListener=function(a,b,c){this._bindEvents(this._o.body,
a,b,c)};b.prototype.on=function(a,b,c){this._bindEvents(this._o.body,a,b,c)};b.prototype.find=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];c=__spreadArray([],this._o.body.querySelectorAll("input"),!0);b.length&&(c=c.filter(function(c){return a._pathIncludes(a._getElementData(c,"jfPath"),b)}));if(c.length)return c};b.prototype.getPath=function(a){return this._getElementData(this._validateElement(a),"jfPath")};b.prototype.getType=function(a){return this._getElementData(this._validateElement(a),
"jfType")};b.prototype.getLabel=function(a){var b=this._pathIncludes(a,Object.keys(this._o.labels)),c=this._parsePath(a),e;b&&(e=this._o.labels[b.match]);"function"===typeof e?e=e(c.parameter,a):"undefined"===typeof e&&(e=c.parameter);return e};b.prototype.pathIncludes=function(a,b,c,e){void 0===c&&(c="input");void 0===e&&(e=!0);return this._pathIncludes(a,b,c,e)};b.prototype.use=function(a){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];if(this.get(a))return this._mayLog(f.Errors)&&
this._log("Extension is already added to the form!"),this;e=new a(this);e.init.apply(e,c);this._extensions.push({_constructor:a,name:b._getExtName(a),instance:e});return this};b.prototype.get=function(a){var c=b._getExtName(a),e;this._extensions.forEach(function(a){c===a.name&&(e=a)});return null===e||void 0===e?void 0:e.instance};b._getExtName=function(a){return a.toString().replace(/function\s+(\w+)\(\)\s*\{[\S\s]*\}\s*/,"$1")};b.prototype.filterData=function(a){return a};b.prototype.filterTargetValue=
function(a){return a};b.prototype.filterInputName=function(a){return a};Object.defineProperty(b.prototype,"data",{get:function(){return this._d},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"json",{get:function(){return JSON.stringify(this._d)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"value",{get:function(){var a=this._o.model,b=this._d;return a.length?b[a]:b},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"model",{get:function(){return this._o.model},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"raw",{get:function(){return this._raw},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"ownerDocument",{get:function(){return this._o.body.ownerDocument},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"body",{get:function(){return this._o.body},enumerable:!1,configurable:!0});b.WIN_PROPS=Object.getOwnPropertyNames(window);b.LOG_LEVEL=f.None;return b}();c.Engine=e})(JsonForm||(JsonForm={}));